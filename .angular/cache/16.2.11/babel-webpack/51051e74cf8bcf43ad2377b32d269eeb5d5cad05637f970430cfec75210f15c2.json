{"ast":null,"code":"var _class;\nimport { __decorate } from \"tslib\";\nimport { UntilDestroy, untilDestroyed } from '@ngneat/until-destroy';\nimport { AuthState } from '@receipt-wrangler/receipt-wrangler-core';\nimport { catchError, of, switchMap } from 'rxjs';\nimport { HOME_ROUTE } from './constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@receipt-wrangler/receipt-wrangler-core\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ngxs/store\";\nimport * as i4 from \"@ionic/angular\";\nexport let AppComponent = (_class = class AppComponent {\n  constructor(authService, appInitService, featureConfigService, router, store) {\n    this.authService = authService;\n    this.appInitService = appInitService;\n    this.featureConfigService = featureConfigService;\n    this.router = router;\n    this.store = store;\n  }\n  ngOnInit() {\n    this.getAppData();\n    this.featureConfigService.getFeatureConfig().pipe().subscribe();\n  }\n  getAppData() {\n    this.store.select(AuthState.isLoggedIn).pipe(untilDestroyed(this), switchMap(() => this.authService.getNewRefreshToken()), switchMap(() => {\n      return this.appInitService.initAppData();\n    }), catchError(err => {\n      this.router.navigate([HOME_ROUTE]);\n      return of(err);\n    })).subscribe();\n  }\n}, _class.ɵfac = function AppComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i1.AppInitService), i0.ɵɵdirectiveInject(i1.FeatureConfigService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Store));\n}, _class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-root\"]],\n  decls: 2,\n  vars: 0,\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-app\");\n      i0.ɵɵelement(1, \"ion-router-outlet\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  dependencies: [i4.IonApp, i4.IonRouterOutlet]\n}), _class);\nAppComponent = __decorate([UntilDestroy()], AppComponent);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}