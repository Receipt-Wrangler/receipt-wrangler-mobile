import { Observable } from 'rxjs';
/**
 * Returns operator that will run
 * `subscribe` outside of the ngxs execution context
 */
export function leaveNgxs(ngxsExecutionStrategy) {
    return (source) => {
        return new Observable((sink) => {
            return source.subscribe({
                next(value) {
                    ngxsExecutionStrategy.leave(() => sink.next(value));
                },
                error(error) {
                    ngxsExecutionStrategy.leave(() => sink.error(error));
                },
                complete() {
                    ngxsExecutionStrategy.leave(() => sink.complete());
                }
            });
        });
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGVhdmUtbmd4cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL3N0b3JlL3NyYy9vcGVyYXRvcnMvbGVhdmUtbmd4cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQTRCLFVBQVUsRUFBWSxNQUFNLE1BQU0sQ0FBQztBQUd0RTs7O0dBR0c7QUFDSCxNQUFNLFVBQVUsU0FBUyxDQUN2QixxQkFBNEM7SUFFNUMsT0FBTyxDQUFDLE1BQXFCLEVBQUUsRUFBRTtRQUMvQixPQUFPLElBQUksVUFBVSxDQUFDLENBQUMsSUFBaUIsRUFBRSxFQUFFO1lBQzFDLE9BQU8sTUFBTSxDQUFDLFNBQVMsQ0FBQztnQkFDdEIsSUFBSSxDQUFDLEtBQUs7b0JBQ1IscUJBQXFCLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDdEQsQ0FBQztnQkFDRCxLQUFLLENBQUMsS0FBSztvQkFDVCxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUN2RCxDQUFDO2dCQUNELFFBQVE7b0JBQ04scUJBQXFCLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO2dCQUNyRCxDQUFDO2FBQ0YsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7QUFDSixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9ub1R5cGVPcGVyYXRvckZ1bmN0aW9uLCBPYnNlcnZhYmxlLCBPYnNlcnZlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTmd4c0V4ZWN1dGlvblN0cmF0ZWd5IH0gZnJvbSAnLi4vZXhlY3V0aW9uL3N5bWJvbHMnO1xuXG4vKipcbiAqIFJldHVybnMgb3BlcmF0b3IgdGhhdCB3aWxsIHJ1blxuICogYHN1YnNjcmliZWAgb3V0c2lkZSBvZiB0aGUgbmd4cyBleGVjdXRpb24gY29udGV4dFxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVhdmVOZ3hzPFQ+KFxuICBuZ3hzRXhlY3V0aW9uU3RyYXRlZ3k6IE5neHNFeGVjdXRpb25TdHJhdGVneVxuKTogTW9ub1R5cGVPcGVyYXRvckZ1bmN0aW9uPFQ+IHtcbiAgcmV0dXJuIChzb3VyY2U6IE9ic2VydmFibGU8VD4pID0+IHtcbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoKHNpbms6IE9ic2VydmVyPFQ+KSA9PiB7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZSh7XG4gICAgICAgIG5leHQodmFsdWUpIHtcbiAgICAgICAgICBuZ3hzRXhlY3V0aW9uU3RyYXRlZ3kubGVhdmUoKCkgPT4gc2luay5uZXh0KHZhbHVlKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yKGVycm9yKSB7XG4gICAgICAgICAgbmd4c0V4ZWN1dGlvblN0cmF0ZWd5LmxlYXZlKCgpID0+IHNpbmsuZXJyb3IoZXJyb3IpKTtcbiAgICAgICAgfSxcbiAgICAgICAgY29tcGxldGUoKSB7XG4gICAgICAgICAgbmd4c0V4ZWN1dGlvblN0cmF0ZWd5LmxlYXZlKCgpID0+IHNpbmsuY29tcGxldGUoKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xufVxuIl19