import { StateToken } from '@ngxs/store';
/** Determines whether the provided key has the following structure. */
export function isKeyWithExplicitEngine(key) {
    return key != null && !!key.engine;
}
/** This symbol is used to store the metadata on state classes. */
const META_OPTIONS_KEY = 'NGXS_OPTIONS_META';
export function exctractStringKey(storageKey) {
    // Extract the actual key out of the `{ key, engine }` structure.
    if (isKeyWithExplicitEngine(storageKey)) {
        storageKey = storageKey.key;
    }
    // Given the `storageKey` is a class, for instance, `AuthState`.
    // We should retrieve its metadata and the `name` property.
    // The `name` property might be a string (state name) or a state token.
    if (storageKey.hasOwnProperty(META_OPTIONS_KEY)) {
        storageKey = storageKey[META_OPTIONS_KEY].name;
    }
    return storageKey instanceof StateToken ? storageKey.getName() : storageKey;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS1rZXkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wYWNrYWdlcy9zdG9yYWdlLXBsdWdpbi9zcmMvaW50ZXJuYWxzL3N0b3JhZ2Uta2V5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFXekMsdUVBQXVFO0FBQ3ZFLE1BQU0sVUFBVSx1QkFBdUIsQ0FBQyxHQUFRO0lBQzlDLE9BQU8sR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNyQyxDQUFDO0FBUUQsa0VBQWtFO0FBQ2xFLE1BQU0sZ0JBQWdCLEdBQUcsbUJBQW1CLENBQUM7QUFDN0MsTUFBTSxVQUFVLGlCQUFpQixDQUFDLFVBQXNCO0lBQ3RELGlFQUFpRTtJQUNqRSxJQUFJLHVCQUF1QixDQUFDLFVBQVUsQ0FBQyxFQUFFO1FBQ3ZDLFVBQVUsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDO0tBQzdCO0lBRUQsZ0VBQWdFO0lBQ2hFLDJEQUEyRDtJQUMzRCx1RUFBdUU7SUFDdkUsSUFBSSxVQUFVLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7UUFDL0MsVUFBVSxHQUFJLFVBQWtCLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQUM7S0FDekQ7SUFFRCxPQUFPLFVBQVUsWUFBWSxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLENBQVMsVUFBVSxDQUFDO0FBQ3RGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3Rpb25Ub2tlbiwgVHlwZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3RhdGVUb2tlbiB9IGZyb20gJ0BuZ3hzL3N0b3JlJztcbmltcG9ydCB7IFN0YXRlQ2xhc3MgfSBmcm9tICdAbmd4cy9zdG9yZS9pbnRlcm5hbHMnO1xuXG5pbXBvcnQgeyBTdG9yYWdlRW5naW5lIH0gZnJvbSAnLi4vc3ltYm9scyc7XG5cbi8qKiBUaGlzIGVuYWJsZXMgdGhlIHVzZXIgdG8gcHJvdmlkZSBhIHN0b3JhZ2UgZW5naW5lIHBlciBpbmRpdmlkdWFsIGtleS4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgS2V5V2l0aEV4cGxpY2l0RW5naW5lIHtcbiAga2V5OiBzdHJpbmcgfCBTdGF0ZUNsYXNzIHwgU3RhdGVUb2tlbjxhbnk+O1xuICBlbmdpbmU6IFR5cGU8U3RvcmFnZUVuZ2luZT4gfCBJbmplY3Rpb25Ub2tlbjxTdG9yYWdlRW5naW5lPjtcbn1cblxuLyoqIERldGVybWluZXMgd2hldGhlciB0aGUgcHJvdmlkZWQga2V5IGhhcyB0aGUgZm9sbG93aW5nIHN0cnVjdHVyZS4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0tleVdpdGhFeHBsaWNpdEVuZ2luZShrZXk6IGFueSk6IGtleSBpcyBLZXlXaXRoRXhwbGljaXRFbmdpbmUge1xuICByZXR1cm4ga2V5ICE9IG51bGwgJiYgISFrZXkuZW5naW5lO1xufVxuXG4vKipcbiAqIFRoaXMgdHVwbGVzIGFsbCBvZiB0aGUgcG9zc2libGUgdHlwZXMgYWxsb3dlZCBpbiB0aGUgYGtleWAgcHJvcGVydHkuXG4gKiBUaGlzIGlzIG5vdCBleHBvc2VkIHB1YmxpY2x5IGFuZCB1c2VkIGludGVybmFsbHkgb25seS5cbiAqL1xuZXhwb3J0IHR5cGUgU3RvcmFnZUtleSA9IHN0cmluZyB8IFN0YXRlQ2xhc3MgfCBTdGF0ZVRva2VuPGFueT4gfCBLZXlXaXRoRXhwbGljaXRFbmdpbmU7XG5cbi8qKiBUaGlzIHN5bWJvbCBpcyB1c2VkIHRvIHN0b3JlIHRoZSBtZXRhZGF0YSBvbiBzdGF0ZSBjbGFzc2VzLiAqL1xuY29uc3QgTUVUQV9PUFRJT05TX0tFWSA9ICdOR1hTX09QVElPTlNfTUVUQSc7XG5leHBvcnQgZnVuY3Rpb24gZXhjdHJhY3RTdHJpbmdLZXkoc3RvcmFnZUtleTogU3RvcmFnZUtleSk6IHN0cmluZyB7XG4gIC8vIEV4dHJhY3QgdGhlIGFjdHVhbCBrZXkgb3V0IG9mIHRoZSBgeyBrZXksIGVuZ2luZSB9YCBzdHJ1Y3R1cmUuXG4gIGlmIChpc0tleVdpdGhFeHBsaWNpdEVuZ2luZShzdG9yYWdlS2V5KSkge1xuICAgIHN0b3JhZ2VLZXkgPSBzdG9yYWdlS2V5LmtleTtcbiAgfVxuXG4gIC8vIEdpdmVuIHRoZSBgc3RvcmFnZUtleWAgaXMgYSBjbGFzcywgZm9yIGluc3RhbmNlLCBgQXV0aFN0YXRlYC5cbiAgLy8gV2Ugc2hvdWxkIHJldHJpZXZlIGl0cyBtZXRhZGF0YSBhbmQgdGhlIGBuYW1lYCBwcm9wZXJ0eS5cbiAgLy8gVGhlIGBuYW1lYCBwcm9wZXJ0eSBtaWdodCBiZSBhIHN0cmluZyAoc3RhdGUgbmFtZSkgb3IgYSBzdGF0ZSB0b2tlbi5cbiAgaWYgKHN0b3JhZ2VLZXkuaGFzT3duUHJvcGVydHkoTUVUQV9PUFRJT05TX0tFWSkpIHtcbiAgICBzdG9yYWdlS2V5ID0gKHN0b3JhZ2VLZXkgYXMgYW55KVtNRVRBX09QVElPTlNfS0VZXS5uYW1lO1xuICB9XG5cbiAgcmV0dXJuIHN0b3JhZ2VLZXkgaW5zdGFuY2VvZiBTdGF0ZVRva2VuID8gc3RvcmFnZUtleS5nZXROYW1lKCkgOiA8c3RyaW5nPnN0b3JhZ2VLZXk7XG59XG4iXX0=